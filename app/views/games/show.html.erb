<h1><%= @game.white_player.playername %> - <%= @game.name %></h1>

<h4><%= @game.state %></h4>

<table class='chessboard'>
	<% @chess_board.each_with_index do |row, y| %>
		<tr>
			<% row.each_with_index do |piece, x| %>
				<td  data-row=<%= y %> data-column=<%= x %> >
          <% if !piece.nil? %>
						<%= image_tag piece.picture,
						class: "piece #{ 'piece_enabled' if Pieces::Disabled.call(piece) }"
						%>
					<% end %>
        </td>
			<% end %>
		</tr>
	<% end %>
</table>

<script type="text/javascript">
	$(()=>{
		$('.piece_enabled').click((e)=>{
			$.ajax({
        type: 'GET',
        url: $('.active').data('url')
      });
		});
	});
</script>
